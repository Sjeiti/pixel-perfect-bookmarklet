'use strict';(function(){function a(){requestAnimationFrame(function(){var a=E.contentWindow,b=a.location.href,c=a.document.title;V!==b&&d(),window.history.pushState({},c,b),V=b})}function b(){var a=G(S)||G(F);return a?JSON.parse(a):[]}function c(){return T&&T.slice(0).pop()||{}}function d(){var a=U;S=E&&E.contentWindow.location.pathname||location.pathname,T=b();var d=!1;T.forEach(function(b){b.data===a.data&&(d=!0)}),d||(U=c(),f(U.data))}function f(a){e(a),x&&(x.style.backgroundImage='url('+a+')')}function e(a){a&&(M.src=a)}function g(a){var b=a.target,c=new FileReader,d=b.files[0];U={name:d.name,lastModified:d.lastModified},c.addEventListener('load',h),c.readAsDataURL(d)}function h(a){var b=a.target,c=b.result;f(c.toString()),U&&(U.data=c),u.value=null}function i(a){var b=a.target,c=parseInt(b.innerText,10);T.forEach(function(a){a.naturalWidth===c&&(U=a)}),U&&f(U.data)}function j(a){Q.show=a.target.checked,o(),r()}function k(a){var b=a.naturalWidth,c=void 0;T.forEach(function(a,d){a.naturalWidth===b&&(c=d)}),c!==void 0&&T.splice(c,1),T.includes(a)||T.push(a),T.sort(function(c,a){return c.naturalWidth>a.naturalWidth?1:-1})}function l(){var a='';T.forEach(function(b){a+='<li'+(b===U?' class="current"':'')+'>'+b.naturalWidth+'</li>'}),v.innerHTML=a}function m(){var a=!Q.show;return a&&(y.checked=Q.show=!0,o()),a}function n(a){Q.opacity=a.target.value,0!==Q.opacity&&m()||o(),r()}function o(){x.style.opacity=Q.show&&Q.opacity||0}function p(a,b){q(a,b.target.value)}function q(a,b){x.style[a]=b+'%',Q[a]=b,m(),r()}function r(){H(P,JSON.stringify(Q))}function s(){return C||Array.from(document.styleSheets).forEach(function(a){a.title===F&&(C=a)}),C}var t,u,v,w,x,y,z,A,B,C,D,E,F='pixelPerfect',G=localStorage.getItem.bind(localStorage),H=localStorage.setItem.bind(localStorage),I=document,J=I.body,K=document.getElementById(F)||document.createElement('div'),L=2147483647,M=document.createElement('img'),N={left:37,up:38,right:39,down:40},O={show:!0,opacity:0.3,width:100,height:100},P=F+'Data',Q=Object.assign(O,JSON.parse(G(P)))||O,R=location,S=R.pathname,T=b(),U=c(),V=location.href;d();var W='#'+F+' {\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: '+(L-100)+';\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n}\n#'+F+', #'+F+' * {\n  font-family: Helvetica, Verdana, Arial, sans;\n  font-size: 12px;\n  color: $444;\n}\n#'+F+' .inner {\n  position: fixed;\n  left: 10px;\n  bottom: 100vh;\n  max-width: 30px;\n  max-height: 30px;\n  padding: 0;\n  background-color: rgba(91,180,0,0.8);\n  z-index: '+(L-10)+';\n  pointer-events: auto;\n  box-shadow: 2px 4px 16px rgba(0,0,0,0.3);\n  border-radius: 50%;\n  transition:\n      left 200ms ease-out 50ms\n      ,padding 200ms ease-out 50ms\n      ,max-width 200ms ease-out 50ms\n      ,max-height 200ms ease-out 50ms\n      ,border-radius 200ms ease-out 50ms\n      ,bottom 500ms ease;\n}\n#'+F+' .inner:after {\n  content: \'\';\n  position: absolute;\n  top: -50%;\n  left: -50%;\n  width: 200%;\n  height: 200%;\n}\n#'+F+' .inner.added {\n  bottom: 10px;\n}\n#'+F+' .inner>* {\n  position: relative;\n  z-index: '+(L-5)+';\n  opacity: 0;\n}\n#'+F+' .inner:hover {\n  left: 0;\n  bottom: 0;\n  max-width: 3330px;\n  max-height: 3330px;\n  border: 0;\n  padding: 20px;\n  border-radius: 0 4px 0 0;\n}\n#'+F+' .inner:hover>* {\n  opacity: 1;\n}\n#'+F+' .file {\n  display: inline-block;\n  width: calc(100% - 40px);\n  margin-bottom: 20px;\n  padding: 8px 16px;\n  border-radius: 2px;\n  box-shadow: 1px 1px 2px rgba(0,0,0,0.2);\n  background-color: rgba(255,255,255,0.2);\n  text-align: center;\n}\n#'+F+' ol {\n  margin: 0 0 20px 0;\n  padding: 0;\n  list-style: none;\n}\n#'+F+' li {\n  display: inline-block;\n  cursor: pointer;\n}\n#'+F+' li.current {\n  font-weight: bold;\n}\n#'+F+' li:not(:first-child) {\n  padding: 0 5px;\n}\n#'+F+' label {\n  display: flex;\n  margin: 0 0 8px 0;\n  justify-content: space-between;\n}\n#'+F+' label, #'+F+' label * {\n  cursor: pointer;\n}\n#'+F+' label * {\n  vertical-align: middle;\n}\n#'+F+' label input {\n  margin-left: 10px;\n}\ninput[type=range] {\n  width: 200px;\n}\n#'+F+' .image {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: '+Q.width+'%;\n  height: '+Q.height+'%;\n  background-image: url('+(U.data||'')+');\n  background-repeat: no-repeat;\n  opacity: '+(Q.show&&Q.opacity||0)+';\n  transition: box-shadow 200ms linear;\n}\n#'+F+'.mousedown .image {\n  box-shadow: 0 0 32px rgba(0,0,0,0.3);\n}\n#'+F+' .visually-hidden {\n  position: absolute;\n  overflow: hidden;\n  clip: rect(0 0 0 0);\n  height: 1px; width: 1px;\n  margin: -1px; padding: 0; border: 0;\n}\nbody, html {\n  width: 100%;\n  height: 100%;\n  max-height: 100%;\n  overflow: hidden;\n}\niframe.'+F+' {\n  min-width: 100%;\n  min-height: 100%;\n  max-height: 100%;\n}',X='<div class="inner" data-html2canvas-ignore>\n    <style title="'+F+'">'+W+'</style>\n    <label class="file">\n        add image\n        <input class="visually-hidden" type="file" accept="image/gif, image/jpg, image/jpeg, image/png, image/svg, .gif, .jpg, .jpeg, .png, .svg" />\n    </label>\n    <ol></ol>\n    <label><span>show/hide</span><input type="checkbox" '+(Q.show?'checked':'')+' class="show" /></label>\n    <label><span>opacity</span><input type="range" min="0" max="1" step="0.05" value="'+Q.opacity+'" class="opacity" /></label>\n    <label><span>horizontal</span><input type="range" min="0" max="100" step="0.1" value="'+Q.width+'" class="horizontal" /></label>\n    <label><span>vertical</span><input type="range" min="0" max="100" step="0.1" value="'+Q.height+'" class="vertical" /></label>\n</div>\n<div class="image"></div>';K.id=F,K.innerHTML=X,e(U.data),J.innerHTML='<iframe src="'+location.href+'" class="'+F+'" frameborder="0"></iframe>',J.appendChild(K),J.addEventListener('keydown',function(a){var b=a.keyCode,c=a.ctrlKey,d=b===N.up,e=b===N.down,f=b===N.left,g=b===N.right,h=d||e,i=c?10:1;if(h||f||g){var j=h?'height':'width',k=h?Q.height:Q.width,l=h?x.offsetHeight:x.offsetWidth,m=d||f?-1:1,n=k/l*(l+m*i);q(j,n),('width'==j?A:B).value=n,a.preventDefault()}},!0),M.addEventListener('load',function(a){var b=a.currentTarget,c=b.naturalWidth,d=b.naturalHeight,e='max-width:'+c+'px;width:'+c+'px;';U&&(Object.assign(U,{naturalWidth:c,naturalHeight:d}),k(U),l()),H(F,JSON.stringify(T)),H(S,JSON.stringify(T)),D?D.style=e:(s().addRule('html, body, #'+F+', iframe.'+F,e),D=C.rules[C.rules.length-1])}),requestAnimationFrame(function(){t=document.getElementById(F),E=J.querySelector('iframe'),u=t.querySelector('input[type=file]'),v=t.querySelector('ol'),w=t.querySelector('.inner'),x=t.querySelector('.image'),y=t.querySelector('input.show'),z=t.querySelector('input.opacity'),A=t.querySelector('input.horizontal'),B=t.querySelector('input.vertical'),w.addEventListener('mousedown',function(){K.classList.add('mousedown')}),J.addEventListener('mouseup',function(){K.classList.remove('mousedown')}),u.addEventListener('change',g),v.addEventListener('click',i),y.addEventListener('change',j),z.addEventListener('input',n),A.addEventListener('input',p.bind(null,'width')),B.addEventListener('input',p.bind(null,'height')),E.addEventListener('load',function(){var b=E.contentDocument.body;b.addEventListener('click',a,!0),b.addEventListener('keyup',a,!0),E.contentWindow.addEventListener('popstate',d,!0)}),requestAnimationFrame(function(){return w.classList.add('added')}),Array.from(document.styleSheets).forEach(function(a){a.title===F&&(C=a)})})})();
