'use strict';(function(){function a(){requestAnimationFrame(function(){W!==location.href&&d(),W=location.href})}function b(){var a=H(T)||H(G);return a?JSON.parse(a):[]}function c(){return U&&U.slice(0).pop()||{}}function d(){var a=V;T=location.pathname,U=b();var d=!1;U.forEach(function(b){b.data===a.data&&(d=!0)}),d||(V=c(),f(V.data))}function f(a){e(a),z&&(z.style.backgroundImage='url('+a+')')}function e(a){a&&(N.src=a)}function g(a){var b=a.target,c=new FileReader,d=b.files[0];V={name:d.name,lastModified:d.lastModified},c.addEventListener('load',h),c.readAsDataURL(d)}function h(a){var b=a.target,c=b.result;f(c.toString()),V&&(V.data=c),w.value=null}function i(a){var b=a.currentTarget,c=b.naturalWidth,d=b.naturalHeight,e='max-width:'+c+'px;width:'+c+'px;';V&&(Object.assign(V,{naturalWidth:c,naturalHeight:d}),l(V),m()),I(G,JSON.stringify(U)),I(T,JSON.stringify(U)),F?F.style=e:(u().addRule('html, body, iframe.'+G,e),F=E.rules[E.rules.length-1])}function j(a){var b=a.target,c=parseInt(b.innerText,10);U.forEach(function(a){a.naturalWidth===c&&(V=a)}),V&&f(V.data)}function k(a){R.show=a.target.checked,p(),t()}function l(a){var b=a.naturalWidth,c=void 0;U.forEach(function(a,d){a.naturalWidth===b&&(c=d)}),c!==void 0&&U.splice(c,1),U.includes(a)||U.push(a),U.sort(function(c,a){return c.naturalWidth>a.naturalWidth?1:-1})}function m(){var a='';U.forEach(function(b){a+='<li'+(b===V?' class="current"':'')+'>'+b.naturalWidth+'</li>'}),x.innerHTML=a}function n(){var a=!R.show;return a&&(A.checked=R.show=!0,p()),a}function o(a){R.opacity=a.target.value,0!==R.opacity&&n()||p(),t()}function p(){z.style.opacity=R.show&&R.opacity||0}function q(a){var b=a.keyCode,c=a.ctrlKey,d=b===O.up,e=b===O.down,f=b===O.left,g=b===O.right,h=d||e,i=c?10:1;if(h||f||g){var j=h?'height':'width',k=h?R.height:R.width,l=h?z.offsetHeight:z.offsetWidth,m=d||f?-1:1,n=k/l*(l+m*i);s(j,n),('width'==j?C:D).value=n,a.preventDefault()}}function r(a,b){s(a,b.target.value)}function s(a,b){z.style[a]=b+'%',R[a]=b,n(),t()}function t(){I(Q,JSON.stringify(R))}function u(){return E||Array.from(document.styleSheets).forEach(function(a){a.title===G&&(E=a)}),E}var v,w,x,y,z,A,B,C,D,E,F,G='pixelPerfect',H=localStorage.getItem.bind(localStorage),I=localStorage.setItem.bind(localStorage),J=document,K=J.body,L=document.getElementById(G)||document.createElement('div'),M=2147483647,N=document.createElement('img'),O={left:37,up:38,right:39,down:40},P={show:!0,opacity:0.3,width:100,height:100},Q=G+'Data',R=Object.assign(P,JSON.parse(H(Q)))||P,S=location,T=S.pathname,U=b(),V=c(),W=location.href;d();var X='#'+G+' {\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: '+(M-100)+';\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n}\n#'+G+', #'+G+' * {\n  font-family: Helvetica, Verdana, Arial, sans;\n  font-size: 12px;\n  color: $444;\n}\n#'+G+' .inner {\n  position: fixed;\n  left: 10px;\n  bottom: 100vh;\n  max-width: 30px;\n  max-height: 30px;\n  padding: 0;\n  background-color: rgba(91,180,0,0.8);\n  z-index: '+(M-10)+';\n  pointer-events: auto;\n  box-shadow: 2px 4px 16px rgba(0,0,0,0.3);\n  border-radius: 50%;\n  transition:\n      left 200ms ease-out 50ms\n      ,padding 200ms ease-out 50ms\n      ,max-width 200ms ease-out 50ms\n      ,max-height 200ms ease-out 50ms\n      ,border-radius 200ms ease-out 50ms\n      ,bottom 500ms ease;\n}\n#'+G+' .inner:after {\n  content: \'\';\n  position: absolute;\n  top: -50%;\n  left: -50%;\n  width: 200%;\n  height: 200%;\n}\n#'+G+' .inner.added {\n  bottom: 10px;\n}\n#'+G+' .inner>* {\n  position: relative;\n  z-index: '+(M-5)+';\n  opacity: 0;\n}\n#'+G+' .inner:hover {\n  left: 0;\n  bottom: 0;\n  max-width: 3330px;\n  max-height: 3330px;\n  border: 0;\n  padding: 20px;\n  border-radius: 0 4px 0 0;\n}\n#'+G+' .inner:hover>* {\n  opacity: 1;\n}\n#'+G+' .file {\n  display: inline-block;\n  width: calc(100% - 40px);\n  margin-bottom: 20px;\n  padding: 8px 16px;\n  border-radius: 2px;\n  box-shadow: 1px 1px 2px rgba(0,0,0,0.2);\n  background-color: rgba(255,255,255,0.2);\n  text-align: center;\n}\n#'+G+' ol {\n  margin: 0 0 20px 0;\n  padding: 0;\n  list-style: none;\n}\n#'+G+' li {\n  display: inline-block;\n  cursor: pointer;\n}\n#'+G+' li.current {\n  font-weight: bold;\n}\n#'+G+' li:not(:first-child) {\n  padding: 0 5px;\n}\n#'+G+' label {\n  display: flex;\n  margin: 0 0 8px 0;\n  justify-content: space-between;\n}\n#'+G+' label, #'+G+' label * {\n  cursor: pointer;\n}\n#'+G+' label * {\n  vertical-align: middle;\n}\n#'+G+' label input {\n  margin-left: 10px;\n}\ninput[type=range] {\n  width: 200px;\n}\n#'+G+' .image {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: '+R.width+'%;\n  height: '+R.height+'%;\n  background-image: url('+(V.data||'')+');\n  background-repeat: no-repeat;\n  opacity: '+(R.show&&R.opacity||0)+';\n  transition: box-shadow 200ms linear;\n}\n#'+G+'.mousedown .image {\n  box-shadow: 0 0 32px rgba(0,0,0,0.3);\n}\n#'+G+' .visually-hidden {\n  position: absolute;\n  overflow: hidden;\n  clip: rect(0 0 0 0);\n  height: 1px; width: 1px;\n  margin: -1px; padding: 0; border: 0;\n}\nbody, html {\n  width: 100%;\n  height: 100%;\n  max-height: 100%;\n  overflow: hidden;\n}\niframe.'+G+' {\n  min-width: 100%;\n  min-height: 100%;\n  max-height: 100%;\n}',Y='<div class="inner" data-html2canvas-ignore>\n    <style title="'+G+'">'+X+'</style>\n    <label class="file">\n        add image\n        <input class="visually-hidden" type="file" accept="image/gif, image/jpg, image/jpeg, image/png, image/svg, .gif, .jpg, .jpeg, .png, .svg" />\n    </label>\n    <ol></ol>\n    <label><span>show/hide</span><input type="checkbox" '+(R.show?'checked':'')+' class="show" /></label>\n    <label><span>opacity</span><input type="range" min="0" max="1" step="0.05" value="'+R.opacity+'" class="opacity" /></label>\n    <label><span>horizontal</span><input type="range" min="0" max="100" step="0.1" value="'+R.width+'" class="horizontal" /></label>\n    <label><span>vertical</span><input type="range" min="0" max="100" step="0.1" value="'+R.height+'" class="vertical" /></label>\n</div>\n<div class="image"></div>';L.id=G,L.innerHTML=Y,e(V.data),K.innerHTML='<iframe src="'+location.href+'" class="'+G+'" frameborder="0"></iframe>',K.appendChild(L),function(){window.addEventListener('popstate',d,!0),K.addEventListener('click',a,!0),K.addEventListener('keyup',a,!0),K.addEventListener('keydown',q,!0),N.addEventListener('load',i)}(),requestAnimationFrame(function(){v=document.getElementById(G),w=v.querySelector('input[type=file]'),x=v.querySelector('ol'),y=v.querySelector('.inner'),z=v.querySelector('.image'),A=v.querySelector('input.show'),B=v.querySelector('input.opacity'),C=v.querySelector('input.horizontal'),D=v.querySelector('input.vertical'),y.addEventListener('mousedown',function(){L.classList.add('mousedown')}),K.addEventListener('mouseup',function(){L.classList.remove('mousedown')}),w.addEventListener('change',g),x.addEventListener('click',j),A.addEventListener('change',k),B.addEventListener('input',o),C.addEventListener('input',r.bind(null,'width')),D.addEventListener('input',r.bind(null,'height')),requestAnimationFrame(function(){return y.classList.add('added')}),Array.from(document.styleSheets).forEach(function(a){a.title===G&&(E=a)})})})();
