'use strict';(function(){function a(){requestAnimationFrame(function(){U!==location.href&&d(),U=location.href})}function b(){var a=F(R)||F(E);return a?JSON.parse(a):[]}function c(){return u=S.slice(0).pop(),u&&u.data?u.data:''}function d(){var a=T;R=location.pathname,S=b(),T=c(),a!==T&&f(T)}function f(a){e(a),x&&(x.style.backgroundImage='url('+a+')')}function e(a){L.src=a}function g(a){var b=a.target,c=new FileReader,d=b.files[0];u={name:d.name,lastModified:d.lastModified},c.addEventListener('load',h),c.readAsDataURL(d)}function h(a){var b=a.target,c=b.result;f(c.toString()),u&&(u.data=c),t.value=null}function i(a){var b=a.currentTarget,c=b.naturalWidth,d=b.naturalHeight,e='max-width:'+c+'px;width:'+c+'px;';u&&(console.log('loadedFile',u),Object.assign(u,{naturalWidth:c,naturalHeight:d}),v.innerText=u.name+' '+c+'x'+d,!S.includes(u)&&S.push(u)),G(E,JSON.stringify(S)),G(R,JSON.stringify(S)),D?D.style=e:(r().addRule('html, body, iframe.'+E,e),D=C.rules[C.rules.length-1])}function j(a){P.show=a.target.checked,m(),q()}function k(){var a=!P.show;return a&&(y.checked=P.show=!0,m()),a}function l(a){P.opacity=a.target.value,0!==P.opacity&&k()||m(),q()}function m(){x.style.opacity=P.show&&P.opacity||0}function n(a){var b=a.keyCode,c=a.ctrlKey,d=b===M.up,e=b===M.down,f=b===M.left,g=b===M.right,h=d||e,i=c?10:1;if(h||f||g){var j=h?'height':'width',k=h?P.height:P.width,l=h?x.offsetHeight:x.offsetWidth,m=d||f?-1:1,n=k/l*(l+m*i);p(j,n),('width'==j?A:B).value=n,a.preventDefault()}}function o(a,b){p(a,b.target.value)}function p(a,b){x.style[a]=b+'%',P[a]=b,k(),q()}function q(){G(O,JSON.stringify(P))}function r(){return C||Array.from(document.styleSheets).forEach(function(a){a.title===E&&(C=a)}),C}var s,t,u,v,w,x,y,z,A,B,C,D,E='pixelPerfect',F=localStorage.getItem.bind(localStorage),G=localStorage.setItem.bind(localStorage),H=document,I=H.body,J=document.getElementById(E)||document.createElement('div'),K=2147483647,L=document.createElement('img'),M={left:37,up:38,right:39,down:40},N={show:!0,opacity:0.3,width:100,height:100},O=E+'Data',P=Object.assign(N,JSON.parse(F(O)))||N,Q=location,R=Q.pathname,S=b(),T=c(),U=location.href;console.log('list',S),d();var V='#'+E+' {\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: '+(K-100)+';\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n}\n#'+E+', #'+E+' * {\n  font-family: Helvetica, Verdana, Arial, sans;\n  font-size: 12px;\n  color: $444;\n}\n#'+E+' .inner {\n  position: fixed;\n  left: 10px;\n  bottom: 100vh;\n  max-width: 30px;\n  max-height: 30px;\n  padding: 0;\n  background-color: rgba(91,180,0,0.8);\n  z-index: '+(K-10)+';\n  pointer-events: auto;\n  box-shadow: 2px 4px 16px rgba(0,0,0,0.3);\n  border-radius: 50%;\n  transition:\n      left 200ms ease-out 50ms\n      ,padding 200ms ease-out 50ms\n      ,max-width 200ms ease-out 50ms\n      ,max-height 200ms ease-out 50ms\n      ,border-radius 200ms ease-out 50ms\n      ,bottom 500ms ease;\n}\n#'+E+' .inner:after {\n  content: \'\';\n  position: absolute;\n  top: -50%;\n  left: -50%;\n  width: 200%;\n  height: 200%;\n}\n#'+E+' .inner.added {\n  bottom: 10px;\n}\n#'+E+' .inner>* {\n  position: relative;\n  z-index: '+(K-5)+';\n  opacity: 0;\n}\n#'+E+' .inner:hover {\n  left: 0;\n  bottom: 0;\n  max-width: 3330px;\n  max-height: 3330px;\n  border: 0;\n  padding: 20px;\n  border-radius: 0 4px 0 0;\n}\n#'+E+' .inner:hover>* {\n  opacity: 1;\n}\n#'+E+' .file {\n  display: inline-block;\n  width: calc(100% - 40px);\n  margin-bottom: 20px;\n  padding: 8px 16px;\n  border-radius: 2px;\n  box-shadow: 1px 1px 2px rgba(0,0,0,0.2);\n  background-color: rgba(255,255,255,0.2);\n  text-align: center;\n}\n#'+E+' label {\n  display: flex;\n  margin: 0 0 8px 0;\n  justify-content: space-between;\n}\n#'+E+' label, #'+E+' label * {\n  cursor: pointer;\n}\n#'+E+' label * {\n  vertical-align: middle;\n}\n#'+E+' label input {\n  margin-left: 10px;\n}\ninput[type=range] {\n  width: 200px;\n}\n#'+E+' .image {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: '+P.width+'%;\n  height: '+P.height+'%;\n  background-image: url('+T+');\n  background-repeat: no-repeat;\n  opacity: '+(P.show&&P.opacity||0)+';\n  transition: box-shadow 200ms linear;\n}\n#'+E+'.mousedown .image {\n  box-shadow: 0 0 32px rgba(0,0,0,0.3);\n}\n#'+E+' .visually-hidden {\n  position: absolute;\n  overflow: hidden;\n  clip: rect(0 0 0 0);\n  height: 1px; width: 1px;\n  margin: -1px; padding: 0; border: 0;\n}\nbody, html {\n  width: 100%;\n  height: 100%;\n  max-height: 100%;\n  overflow: hidden;\n}\niframe.'+E+' {\n  min-width: 100%;\n  min-height: 100%;\n  max-height: 100%;\n}',W='<div class="inner" data-html2canvas-ignore>\n    <style title="'+E+'">'+V+'</style>\n    <label class="file">\n        add image\n        <input class="visually-hidden" type="file" accept="image/gif, image/jpg, image/jpeg, image/png, image/svg, .gif, .jpg, .jpeg, .png, .svg" />\n    </label>\n    <p></p>\n    <label><span>show/hide</span><input type="checkbox" '+(P.show?'checked':'')+' class="show" /></label>\n    <label><span>opacity</span><input type="range" min="0" max="1" step="0.05" value="'+P.opacity+'" class="opacity" /></label>\n    <label><span>horizontal</span><input type="range" min="0" max="100" step="0.1" value="'+P.width+'" class="horizontal" /></label>\n    <label><span>vertical</span><input type="range" min="0" max="100" step="0.1" value="'+P.height+'" class="vertical" /></label>\n</div>\n<div class="image"></div>';J.id=E,J.innerHTML=W,T&&e(T),I.innerHTML='<iframe src="'+location.href+'" class="'+E+'" frameborder="0"></iframe>',I.appendChild(J),function(){window.addEventListener('popstate',d,!0),I.addEventListener('click',a,!0),I.addEventListener('keyup',a,!0),I.addEventListener('keydown',n,!0),L.addEventListener('load',i)}(),requestAnimationFrame(function(){s=document.getElementById(E),t=s.querySelector('input[type=file]'),v=s.querySelector('p'),w=s.querySelector('.inner'),x=s.querySelector('.image'),y=s.querySelector('input.show'),z=s.querySelector('input.opacity'),A=s.querySelector('input.horizontal'),B=s.querySelector('input.vertical'),w.addEventListener('mousedown',function(){J.classList.add('mousedown')}),I.addEventListener('mouseup',function(){J.classList.remove('mousedown')}),t.addEventListener('change',g),y.addEventListener('change',j),z.addEventListener('input',l),A.addEventListener('input',o.bind(null,'width')),B.addEventListener('input',o.bind(null,'height')),requestAnimationFrame(function(){return w.classList.add('added')}),Array.from(document.styleSheets).forEach(function(a){a.title===E&&(C=a)})})})();
